<%perl>
# expect name of Table & object that require sorting
undef( %args );
foreach my $j ( keys %ARGS ) {
  next if( $ARGS{$j} !~ /\w+/ || $j eq "submit" );
  $args{$j} = $ARGS{$j};
}
if( $args{table} ) {
  undef( $obj );
  $obj = (Meta->search( name => $args{table} ))[0];
  if( defined( $obj ) ) {
    my $i = 1;
    undef( %order );
    if( defined( $obj->columnOrder ) ) {
      map { $order{$_} = $i++; } split( /,/, $obj->columnOrder );
    } else {
      $order{"id"} = $i++;
      foreach ( sort { $a cmp $b } $obj->name->columns() ) {
        next if( $_ eq "id" );
        $order{$_} = $i++;
      }
    }
    undef( %linksto );
    map { my($j, $k) = split( /:/, $_ ); $linksto{$j} = $k } 
        split( /,/, $obj->linksTo );
    undef( %linksfrom );
    map { my($i, $j, $k) = split( /:/, $_ ); $linksfrom{$i}{$j} = $k } 
        split( /,/, $obj->linksFrom );
  }
}
if( $args{id} ) {
  $obj = $args{table}->retrieve( $args{id} );
}
</%perl>

% if( defined( $obj ) ) {
%   foreach my $c ( sort { $order{$a} <=> $order{$b} } keys %order ) {
    do something
%   }
% } else {

    Sorry - id <% $args{id} %> doesn't exist in table <% $args{table} %>

% }


expview.html?table=<% $arg{table} %>&id=<% $o->id %>"><% $o->id %>

<%init>
use lib "/home/netdot/public_html/lib";
use Netdot::DBI;
use Data::Dumper;
my( %args, %order, %linksto, %linksfrom, $obj );

</%init>

<%doc>
mason file

######################################################################
#  $Log: tblview.html,v $
#  Revision 1.1  2003/05/01 16:50:43  netdot
#  Initial revision
#

</%doc>
