<%doc>

 Generic Database Operations Section.

</%doc>

<%attr>
title   => 'Generic DB operations' 
section => 'Generic'
</%attr>

<%args>
$sql        => undef
$action     => undef
$showheader => 1
</%args>

<%init>
my @t;

my $hideheader;
if( !$showheader ) {
    $hideheader = 'style="display:none"';
}
</%init>

<%shared>
my $PAGE_ATTRIBUTE = "GENERIC_PAGE";
my $SECTION = "Generic";
</%shared>

<%method .section_meta_data>
    <%doc>
        Returns the meta data used to generate this sections header in section1.mhtml
    </%doc>
    <%init>
        return {  
	    section => $SECTION,
	    page => 'generic/',
	    title => 'Generic',
	    attribute => $PAGE_ATTRIBUTE,
	    sub_sections => [],
        };
    </%init>
</%method>
<div id="sectiontools" <% $hideheader %>>

<div class="container">
    <div class="containerhead">
        Generic Database Operations
    </div>

    <div class="containerbody">

    <p><b>Note:</b> These functions do not perform any validation
    checking. They are intended to provide direct access to the
    database.</p>
    <p><b>Do not edit anything here</b> unless you know what you are doing.</p>
%
%     map { push @t, $_ unless ($_ =~ /_history/ || $_ eq "Meta") } sort $ui->meta->get_tables;
%

    </div> <!-- close containerbody -->
</div> <!-- close container -->

    <p>
    <fieldset class="small">
        <legend>Search</legend>
        <form action="search_obj.html" method="POST">
            <select name="table">
%       foreach my $t (@t) {
                <option><% $t %></option>
%       }
            </select>
            <input name="submit" value="Go" type="submit">
        </form>
    </fieldset>
    </p>

    <p>
    <fieldset class="small">
        <legend>Add</legend>
        <form action="edit.html" method="POST">
            <select name="table">
%       foreach my $t (@t) {
                <option><% $t %></option>
%       }
            </select>
            <input name="submit" value="Go" type="submit">
        </form>
    </fieldset>
    </p>

    <p>
    <fieldset class="small">
        <legend>Browse</legend>
        <form action="browse.html" method="POST">
            <select name="table">
%       foreach my $t (@t) {
                <option><% $t %></option>
%       }
            </select>
            <input name="submit" value="Go" type="submit">
        </form>
    </fieldset>
    </p>

<& /generic/raw_sql.html, sql => $sql, action => $action  &>

</div> <!-- close sectiontools -->

% if ( $m->fetch_next ){
%  $m->call_next;
% }

