<& index.html, title => " Delete: $table object" , s2name => $s2name  &>

<%perl>

unless( $obj = $table->retrieve($id) ){
  $m->comp('error.mhtml', error => "$table id $id does not exist");
} 

</%perl>

%if ( ! $submit  ){
% my $lbl = $ui->getobjlabel($obj, ", ");

<table align="center" valign="top" border="0" width="95%">
<tr><td>

<p>Are you sure you want to delete <% $table %> <strong><% $lbl %></strong>?

<form method="POST" action="delete.html">
<input type="hidden" name="table" value="<% $table %>">
<input type="hidden" name="id" value="<% $obj->id %>">
<input type="hidden" name="confirm" value="1">
<p>
<input name="submit" value="Proceed" type="submit">
<input name="submit" value="Cancel" type="submit">
</form>

<p><br>
</td></tr>
</table>
<& footer.mhtml &>

%}elsif ($confirm && $submit eq "Proceed"){

<table align="center" valign="top" border="0" width="95%">
<tr><td>

<%perl>
# Delete the object
  my $lbl = $ui->getobjlabel($obj, ", ");
  eval {
      $obj->delete;
      };
 if ($@){
  $m->comp('error.mhtml', error => "$@");
 } else{
</%perl>

<strong><% "$table $lbl" %></strong> deleted.

%}

</td></tr>
</table>
<& footer.mhtml &>

%}elsif ($ARGS{submit} eq "Cancel"){
   <& view.html, table => $table, id => $obj->id &>
%  exit;
%}

<%args>
$table
$id
$s2name  => undef
$submit  => undef
$confirm => undef
</%args>

<%init>
my $ui = Netdot::UI->new();
my $obj;
</%init>
