<%doc>

Common header for all pages

</%doc>
%
<%args>
$title
$section
$user
$showheader
</%args>
%
%
<%init>
my %caller_args = $m->caller_args(-1);
my $page = "";

my $hideheader;
if( !$showheader ) {
    $hideheader = 'style="display:none"';
}
</%init>
%
<div id="navbar" <% $hideheader %>>
    <ul id="navigation">
        <li>
%
% if( $section eq "Management" ) {
%     if (exists($caller_args{page})){
%         $user->setAttribute($r, "MANAGEMENT_PAGE", $caller_args{page});
%     }
<%perl>
    eval { $page = $user->getAttribute("MANAGEMENT_PAGE") };

    if ($@) {
	$m->comp( "error.mhtml", error => <<HERE );

You have just encountered a bug which currently has us stumped.
Please report in detail what you were doing around the time the error
occured (e.g. if you were eating lunch what kind of lettuce did you
have on your sandwhich) and tell us what time netdot says it is right
now (upper right corner).  Thanks.

The perl error was:
$@
HERE
}
</%perl>
            <a href="section_management.html" class="current">Management</a>
            <ul id="subnavigation">
                <li><a href="section_management.html?page=DEVICE" <% ($page eq "DEVICE" || $page eq ""?'class="subnav_selected"':'') %>>Devices</a></li>
                <li><a href="section_management.html?page=ADDRESS" <% ($page eq "ADDRESS"?'class="subnav_selected"':'') %>>Address Space</a></li>
                <li><a href="section_management.html?page=SERVICES" <% ($page eq "SERVICES"?'class="subnav_selected"':'') %>>Services</a></li>
            </ul>
%
% } else {
      <a href="section_management.html">Management</a>
% }
%
        </li>
        <li>
%
% if( $section eq "Operations" ) {
%     if (exists($caller_args{page})){
%         $user->setAttribute($r, "OPERATIONS_PAGE", $caller_args{page});
%     }
%     $page = $user->getAttribute("OPERATIONS_PAGE");
            <a href="section_operations.html" class="current">Operations</a>
            <ul id="subnavigation">
                <li><a href="section_operations.html?page=SEARCH" <% ($page eq "SEARCH" || $page eq ""?'class="subnav_selected"':'') %>>Search</a></li>
                <li><a href="section_operations.html?page=TACTICAL" <% ($page eq "TACTICAL"?'class="subnav_selected"':'') %>>Tactical</a></li>
            </ul>
%
% } else {
            <a href="section_operations.html">Operations</a>
% }
%
        </li>
        <li>
%
%
% if( $section eq "Plant" ) {
%     if (exists($caller_args{page})){
%         $user->setAttribute($r, "CABLE_PLANT_PAGE", $caller_args{page});
%     }
%     $page = $user->getAttribute("CABLE_PLANT_PAGE");
%
            <a href="section_cable.html" class="current">Cable Plant</a>
            <ul id="subnavigation">
                <li><a href="section_cable.html?page=BACKBONE" <% ($page eq "BACKBONE" || $page eq ""?'class="subnav_selected"':'') %>>Backbone Cables</a></li>
                <li><a href="section_cable.html?page=HORIZONTAL" <% ($page eq "HORIZONTAL"?'class="subnav_selected"':'') %>>Horizontal Cables</a></li>
                <li><a href="section_cable.html?page=CLOSETS" <% ($page eq "CLOSETS"?'class="subnav_selected"':'') %>>Closets</a></li>
                <li><a href="section_cable.html?page=STRANDS" <% ($page eq "STRANDS"?'class="subnav_selected"':'') %>>Cable Strands</a></li>
                <li><a href="section_cable.html?page=CIRCUITS" <% ($page eq "CIRCUITS"?'class="subnav_selected"':'') %>>Circuits</a></li>
            </ul>
%
% } else {
            <a href="section_cable.html">Cable Plant</a>
% }
%
        </li>
        <li>
%
% if( $section eq "Generic" ) {
%     if (exists($caller_args{page})){
%         $user->setAttribute($r, "GENERIC_PAGE", $caller_args{page});
%     }
%     $page = $user->getAttribute("GENERIC_PAGE");
%
            <a href="section_generic.html" class="current">Generic</a>
            <ul id="subnavigation">
            </ul>
%
% } else {          
            <a href="section_generic.html">Generic</a>
% }
%
        </li>
        <li>
%
% if( $section eq "Reports" ) {
%     if (exists($caller_args{page})){
%         $user->setAttribute($r, "REPORTS_PAGE", $caller_args{page});
%     }
%     $page = $user->getAttribute("REPORTS_PAGE");
            <a href="section_reports.html" class="current">Reports</a>
            <ul id="subnavigation">
                <li><a href="reports_device_inventory.html?page=DEVICE" <% ($page eq "DEVICE"?'class="subnav_selected"':'') %>>Device Inventory</a></li>
                <li><a href="reports_custom.html?page=CUSTOM" <% ($page eq "CUSTOM"?'class="subnav_selected"':'') %>>Custom Reports</a></li>
                <li><a href="reports_database.html?page=DATABASE" <% ($page eq "DATABASE"?'class="subnav_selected"':'') %>>Database Reports</a></li>
            </ul>
%
%
% } else {
            <a href="section_reports.html">Reports</a>
% }
%
        </li>
        <li>
            <a href="section_help.html">Help</a>
        </li>
    </ul>
</div>
