
<& index.html, title => "Device Worksheet: $name ", s2name => $s2name  &>

<script language="javascript" src="select.js"></script>

% print "<pre>", Dumper(%ARGS), "</pre><br>" if $DEBUG;
% if ( defined($search) && $search =~ /\w+/ ){
%   my $list;
%   unless ( ($list = $dns->getdevbynamelike($search)) ){
       <p><b>No results</b>
%      $m->abort;
       </td></tr></table>
%   }

%   my $num = scalar(@$list);
 <table width="95%" border="0" cellspacing="0" cellpadding="1" class="tablebackground"> 
 <tr><td>
   Query <b><em><% $search %></em></b> returned: <b><% $num %> match(es)</b>
   <p>
   <table border="0" width="100%" cellspacing="0" cellpadding="1" class="tablebackground">
      <tr class="rowtitle0">
      <td>Name</td>
      <td>Type</td>
      <td>Product</td>
      </tr>
%    foreach my $dev (@$list){
      <tr>
	 <td class="column2">
	    <b><a href="device-ws.html?id=<% $dev->id %>"><% $dev->name->name %></a></b>
	 </td>   
	 <td class="column2">
	    <b><% $dev->productname->type->name %></b>
	 </td>   
	 <td class="column2">
	    <b><% $dev->productname->name %></b>
	 </td>   
      </tr>
      <tr height="1" class="delimiter">
        <td colspan="3" height="1"></td>
      </tr>
%    }   

   </table>
%} elsif ( defined($search) && $search !~ /\w+/ ){
     <p><b>No search criteria</b>   
%    $m->abort;

<%perl>
}elsif( $ARGS{intadd} ){

# Add a group of interfaces
# -----------------------------------------------------------------------------
  if (defined ($ARGS{intaddnum}) &&  $ARGS{intaddnum} > 0){
     my %tmpint;
     $tmpint{device} = $id;
     $tmpint{monitored} = 0;
     $tmpint{number} = 1000;
     my $i;
     for ($i = 0; $i < $ARGS{intaddnum}; $i++){
        $tmpint{number}++;
     	if (!($ui->insert(table => "Interface", state => \%tmpint)) ){
	   my $err = $ui->error;
	   die "Error: $err"; 
	}
     }
  }
}elsif( defined($ARGS{submit}) ){

# insert/update
# -----------------------------------------------------------------------------
    print "ARGS is  <pre>", Dumper(%ARGS), "</pre><br>" if $DEBUG;
    if (!$ui->form_to_db(%ARGS)){
	my $err = $ui->error();
	die("Error: $err\n");
    }
    
    # Do this to 'flush' the values associated with the object
    # before redisplaying
    $o = undef;
    if ($id){
	$o = Device->retrieve($id);
	$name = $o->name;
    }
}
</%perl>

%if (!defined($search)){
<!-- Header Table -->
<table border="0" width="95%" align="center" cellpadding="3" cellspacing="0" class="tablebackground">
 <tr class="rowtitle0" >
    <td align="left">
    Device: <b><% $o->name->name %></b>&nbsp;&nbsp; 
    <a href="device-ws.html?id=<% $id %>"> [refresh]</a>
    <a href="delete.html?table=Device&id=<% $id %>"> [delete]</a>
    </td>

 </tr>
</table>
<!-- Margins Table -->
<table border="0" width="95%" align="center"  class="tablebackground">
 <tr>
   <td valign="top" width="50%" align="center">

% if ( $editgen || $editloc || $editmgmt || $editips || $editints ){	 
    <form name="netdotform" action="device-ws.html" method="POST">
    <input type="hidden" name="id" value="<% $id %>">
    <input type="hidden" name="s2name" value="<% $s2name %>">
% }
<!-- General Info Table -->
   <table border="0" width="100%" cellpadding="0" cellspacing="2" class="formtablebg">
   <tr class="formtabletitle" >
     <td colspan="2">
      <table width="100%" border="0">
       <tr>
         <td width="10%" align="left">&nbsp;</td>
         <th width="80%" align="center">General</th>
%	 if ($editgen){	 
            <td width="10%" align="right"><input name="submit" value="save" type="submit"></td>
%	 }else{
            <td width="10%" align="right"><a href="device-ws.html?id=<% $id %>&editgen=1">[edit]</a></td>
%	 }
       </tr>
      </table>
     <td>
   </tr>
   <tr>
      <td valign="top" width="50%">
         <table border="0" width="100%">
	    <tr>
	      <td class="formtablec1">Name: </td>
	      <td class="formtablec2"> 
%	         if ($o->name){
%	      	   if ($editgen){	 
		      <input type="text" name="RR__<% $o->name->id %>__name" value="<% $o->name->name %>">  
%	           }else{
		      <b><a href="view.html?table=RR&id=<% $o->name->id %>"><% $o->name->name %></a></b>
%		   }
%		 }
%		 else{ 
		   No name!
%		 }
	      </td>
	    </tr>
           <tr>
             <td class="formtablec1">Type: </td>
	     <td class="formtablec2"> 
%	       if (($o->productname) && ($o->productname->type)){	 
    	        <a href="view.html?table=Product&id=<% $o->productname->id %>"><% $o->productname->type->name %></a>
%	       }
	     </td> 
	   </tr>
           <tr>
             <td class="formtablec1">S/N: </td>
	     <td class="formtablec2"> 
%               $ui->textField(object=>$o, column=>"serialnumber", edit=>$editgen);
	     </td> 
	   </tr>
           <tr>
             <td class="formtablec1">MAC: </td>
	     <td class="formtablec2"> 
%               $ui->selectLookup(object=>$o, column=>"physaddr", lookup=>"PhysAddr", edit=>"$editgen", makeLink=>1);
	     </td> 
	   </tr>
           <tr>
             <td class="formtablec1">Installed:</td>
	     <td class="formtablec2"> 
%               $ui->textField(object=>$o, column=>"dateinstalled", edit=>$editgen);
	     </td> 
	   </tr>
           <tr>
             <td class="formtablec1">Last updated:</td>
	     <td class="formtablec2"> 
%               $ui->textField(object=>$o, column=>"lastupdated", edit=>$editgen);
	     </td> 
	   </tr>
	 </table>
      </td>
      <td valign="top" width="50%">
         <table  border="0" width="100%">
           <tr>
             <td class="formtablec1">Product: </td>
	     <td class="formtablec2"> 
%               $ui->selectLookup(object=>$o, column=>"productname", lookup=>"Product", edit=>"$editgen", makeLink=>1);
	     </td>
	   </tr>
           <tr>
             <td class="formtablec1">Part of: </td>
	     <td class="formtablec2"> 
%               $ui->selectLookup(object=>$o, column=>"part_of", lookup=>"Device", edit=>"$editgen");
	     </td>
	   </tr>
           <tr>
             <td class="formtablec1">Inventory #: </td>
	     <td class="formtablec2"> 
%               $ui->textField(object=>$o, column=>"inventorynumber", edit=>$editgen);
	     </td> 
	   </tr>
           <tr>
             <td class="formtablec1">System Descr: </td>
	     <td class="formtablec2"> 
%               $ui->textField(object=>$o, column=>"sysdescription", edit=>$editgen);
             </td> 
	   </tr>
	 </table>
      </td>
  </tr>
   <tr>
     <td colspan="2" align="center">Comments:</td>
   </tr>
   <tr>
     <td colspan="2" align="left">
%               $ui->textArea(object=>$o, column=>"info", edit=>$editgen, htmlExtra=>"cols=80");
     </td>
   </tr>
 </table>
% if ($editgen){	 
    </form>
% }
<!-- End General Info Table -->

<br>
<!-- IPs Table -->

  <table border="0" width="100%"  class="formtablebg" cellpadding="0" cellspacing="2">
   <tr class="formtabletitle" >
     <td colspan="2">
      <table width="100%" border="0">
       <tr>
         <td width="10%" align="left">&nbsp;</td>
         <th width="80%" align="center">IPs</th>
%	 if ($editips){	 
            <td width="10%" align="right"><input name="submit" value="save" type="submit"></td>
%	 }else{
            <td width="10%" align="right"><a href="device-ws.html?id=<% $id %>&editips=1">[edit]</a></td>
%	 }
       </tr>
      </table>
     <td>
   </tr>
   <tr>
     <td>
      <table border="0">
%	my @ips;
%	foreach my $if ($o->interfaces) {
%	  my @intips;
%	  next unless (scalar(@intips = $if->ips));
%	  map { push @ips, $_} @intips;
%	}
%	if (scalar @ips){
         <tr>
	   <td align="center"><a href="device-ws.html?id=<% $id %>&ipsort=ip">IP</a></td>
	   <td align="center"><a href="device-ws.html?id=<% $id %>&ipsort=subnet">Subnet</a></td>
	   <td align="center"><a href="device-ws.html?id=<% $id %>&ipsort=interface">Interface</a></td>
         </tr>
%	}
<%perl>	
       my @sortedips;
       $ipsort ||= "ip";
       if ($ipsort eq "ip" ){
          # Sort by IP address
          #
	  @sortedips = @{ $ipm->sortblocksbyaddr(\@ips) };
       }elsif ($ipsort eq "subnet"){
          # Sort by Subnet
          #
	  @sortedips = @{ $ipm->sortblocksbyparent(\@ips) };
       }elsif ($ipsort eq "interface"){
          # Sort by Interface
          #
          @sortedips = map { $_->[0] }
		sort {	$a->[1] cmp $b->[1] }
		map { [ $_, $_->interface->name ] } @ips;
	}		
</%perl>	
%	foreach my $ip (@sortedips){	   
%	 $ci = ($ci + 1) % 2;
	 <tr class="<% $cssitem{$ci} %>">
	   <td align="left">
%	      	 if ($editips){	 
		    <input type="checkbox" name="<% "Ip__" . $ip->id . "__delete" %>" >[del]
		    <input type="text" size="15" name="<% "Ip__" . $ip->id . "__address" %>" value="<% $ip->address %>">
		    <br>
%	         }else{
		    <a href="view.html?table=Ipblock&id=<% $ip->id %>"><% $ip->address %></a><br>
%		 }
	   </td>
	   <td align="left">
%	     if ( $ip->parent  ){
	       <a href="view.html?table=Ipblock&id=<% $ip->parent->id %>"><% $ip->parent->address %>/<% $ip->parent->prefix %></a><br>
%            }
	   </td>
	   <td align="left"><font size="-1"><% $ip->interface->name %></font></td>
	  </tr>
%	}# foreach	
     </table>
    </td>
   </tr>
  </table>
% if ($editips){	 
    </form>
% }

<!-- End IPs Table -->

</td>
<td valign="top" align="center">

<!-- Location Table -->

  <table border="0" width="100%"  class="formtablebg" cellpadding="0" cellspacing="2">
   <tr class="formtabletitle" >
     <td colspan="2">
      <table width="100%" border="0">
       <tr>
         <td width="10%" align="left">&nbsp;</td>
         <th width="80%" align="center">Group/Location</th>
%	 if ($editloc){	 
            <td width="10%" align="right"><input name="submit" value="save" type="submit"></td>
%	 }else{
            <td width="10%" align="right"><a href="device-ws.html?id=<% $id %>&editloc=1">[edit]</a></td>
%	 }
       </tr>
      </table>
     <td>
   </tr>
   <tr>
     <td>
      <table border="0">
        <tr>
	   <td class="formtablec1">Entity: </td>
	     <td class="formtablec2"> 
%               $ui->selectLookup(object=>$o, column=>"entity", lookup=>"Entity", edit=>"$editloc", makeLink=>1);
	     </td>
	</tr>
        <tr>
	   <td class="formtablec1">Site: </td>
	     <td class="formtablec2"> 
%               $ui->selectLookup(object=>$o, column=>"site", lookup=>"Site", edit=>"$editloc", makeLink=>1);
	     </td>
	</tr>
        <tr>
	   <td class="formtablec1">Room: </td>
	     <td class="formtablec2"> 
%               $ui->textField(object=>$o, column=>"room", edit=>$editmgmt);
	</tr>
        <tr>
	   <td class="formtablec1">Rack: </td>
	     <td class="formtablec2"> 
%               $ui->textField(object=>$o, column=>"rack", edit=>$editmgmt);
	     </td>
	</tr>
      </table>
     </td>
   </tr>
   </tr>
  </table>
% if ($editloc){	 
    </form>
% }

<!-- End Location Table -->
<br>
<!-- Management Table -->
  <table border="0" width="100%" class="formtablebg" cellpadding="0" cellspacing="2">
   <tr class="formtabletitle">
     <td colspan="2">
      <table width="100%" border="0">
       <tr>
         <td width="10%" align="left">&nbsp;</td>
         <th width="80%" align="center">Management</th>
%	 if ($editmgmt){	 
            <td width="10%" align="right"><input name="submit" value="save" type="submit"></td>
%	 }else{
            <td width="10%" align="right"><a href="device-ws.html?id=<% $id %>&editmgmt=1">[edit]</a></td>
%	 }
       </tr>
      </table>
     <td>
   </tr>
   <tr>
     <td valign="top" width="50%">
      <table border="0" width="100%">
        <tr>
	   <td class="formtablec1">Contact Group: </td>
	     <td class="formtablec2"> 
%               $ui->selectLookup(object=>$o, column=>"contactlist", lookup=>"ContactList", edit=>"$editmgmt", makeLink=>1);
	     </td>
	</tr>
        <tr>
	   <td class="formtablec1">User: </td>
	     <td class="formtablec2"> 
%               $ui->selectLookup(object=>$o, column=>"person", lookup=>"Person", edit=>"$editmgmt", makeLink=>1);
	     </td>
	</tr>
        <tr>
	   <td class="formtablec1">Out-of-band hostname: </td>
	     <td class="formtablec2">
%               $ui->textField(object=>$o, column=>"oobname", edit=>$editmgmt);
	     </td>
	</tr>
        <tr>
	   <td class="formtablec1">Out-of-band tel: </td>
	     <td class="formtablec2"> 
%               $ui->textField(object=>$o, column=>"oobnumber", edit=>$editmgmt);
	     </td>
	</tr>
        <tr>
	   <td class="formtablec1">SNMP Community: </td>
	     <td class="formtablec2"> 
%               $ui->textField(object=>$o, column=>"community", edit=>$editmgmt);
	     </td>
	</tr>
       </table>
     </td>
     <td valign="top" width="50%">
      <table border="0" width="100%">
         <tr>
	   <td class="formtablec1">Monitored?: </td>
	     <td class="formtablec2"> 
%                $ui->radioGroupBoolean(object=>$o, column=>"monitored", edit=>$editmgmt);
	     </td>
	</tr>
         <tr>
	   <td class="formtablec1">Customer-managed?: </td>
	     <td class="formtablec2"> 
%                $ui->radioGroupBoolean(object=>$o, column=>"customer_managed", edit=>$editmgmt);
	     </td>
	</tr>
         <tr>
	   <td class="formtablec1">SNMP-managed?: </td>
	     <td class="formtablec2"> 
%                $ui->radioGroupBoolean(object=>$o, column=>"snmp_managed", edit=>$editmgmt);
	     </td>
	</tr>
         <tr>
	   <td class="formtablec1">Auto-update?: </td>
	     <td class="formtablec2"> 
%                $ui->radioGroupBoolean(object=>$o, column=>"canautoupdate", edit=>$editmgmt);
	     </td>
	</tr>
         <tr>
	   <td class="formtablec1">NATted?: </td>
	     <td class="formtablec2"> 
%                $ui->radioGroupBoolean(object=>$o, column=>"natted", edit=>$editmgmt);
	     </td>
	</tr>
      </td>
     </tr>
    </table>
%	if (! $editmgmt){	 
        <tr>
	   <td class="formtablec1">Fetch SNMP info and update DB</td>
	     <td class="formtablec2"><b><a href="device.html?device=<% $name %>&action=update">[update]</a></b></td>
	</tr>
        <tr>
	   <td class="formtablec1">Connect via: </td>
	   <td colspan="2" class="formtablec2" ><a href="http://<% $name %>">[HTTP]</a> <a href="ssh://<% $user %>@<% $name %>">[SSH]</a> <a href="telnet://<% $name %>">[Telnet]</a></td>
	</tr>
%       } 
  </table>

% if ($editmgmt){	 
    </form>
% }

<!-- End Management Table -->

  </td>
 </tr>
 <tr>
  <td colspan="2">

<!-- Interface Table -->

  <table border="0" width="100%" align="left" class="formtablebg" cellpadding="0" cellspacing="2">
   <tr class="formtabletitle"> 
     <td colspan="2">
      <table width="100%" border="0">
       <tr>
         <td width="10%" align="left">&nbsp;</td>
         <th width="80%" align="center">Interfaces</th>
%	 if ($editints){	 
            <td width="10%" align="right"><input name="submit" value="save" type="submit"></td>
%	 }else{
            <td width="10%" align="right"><a href="device-ws.html?id=<% $id %>&editints=1">[edit]</a></td>
%	 }
       </tr>
      </table>
     <td>
   </tr>
   <tr>
     <td>
      <table border="0" width="100%">
        <tr>
%	   if ($editints){	 
	      <td align="center">[del]</td>
%	   }
	   <td align="left">Number</td>
	   <td align="left">Name</td>
	   <td align="left">Vlan</td>
	   <td align="left">Room</td>
	   <td align="left">Jack</td>
	   <td align="left">Description</td>
	   <td align="left">Parents</td>
	   <td align="left">Monitored?</td>
        </tr>

%	#####################################
%	# Sort numerically by port number
%	#
%	# Hub ports have dots, so add a fake '.0' after numbers with no dots, and then
%	# split in two and sort first part and then second part
%	# (i.e: 1.10 goes after 1.2)
%	my @tmp;
%	foreach my $if ($o->interfaces) {
%	   my $num = $if->number;
%	   if ($num !~ /\./ ){
%	      $num .= '.0';
%	   }
%	   push @tmp, [(split /\./, $num), $if];
%	}	
%	my @ordered_ifs = sort { $a->[0] <=> $b->[0] 
%	                                  ||
%			         $a->[1] <=> $b->[1] } @tmp;
			  
%       foreach my $if (map { $_->[2] } @ordered_ifs){
%	  $ci = ($ci + 1) % 2;
	  <tr class="<% $cssitem{$ci} %>">
%	       if ($editints){	 
		<td align="left">
		  <input type="checkbox" name="<% "Interface__" . $if->id . "__delete" %>" >
		</td>	   
%	       }
	   <td align="left"> 
%               $ui->textField(object=>$if, column=>"number", edit=>$editints, makeLink => 1);
	   </td>
	   <td align="left"> 
%               $ui->textField(object=>$if, column=>"name", edit=>$editints);
	   </td>
	   <td align="left"> 
%	      if (scalar( my @ifv = $if->vlans)){
%	         my @links;
%	         foreach my $ifv (@ifv){
%		   my $v = $ifv->vlan;
%		   push @links, sprintf("<a href=\"view.html?table=Vlan&id=%s\">%s</a>", $v->id, $v->vid );
%		 }
%		 print join ', ', @links;

%	      }
	   </td>
	   <td align="left"> 
%	         if(defined($if->jack)){
		    <% $if->jack->room %>
%		 }
	   </td>
	   <td align="left"> 
%	      	 if ($editints){	 
%		    my $count = HorizontalCable->count_all;
%                   if (defined($if->jack)){
%		      if ( $count <= $maxselect ){			      
%		         my @alljacks = HorizontalCable->retrieve_all;
%		         @alljacks = sort { $a->jackid <=> $b->jackid } @alljacks; 
   		         <select name="<% "Interface__" . $if->id ."__jack" %>">
		           <option value="$if->jack->id" selected><% $if->jack->jackid %> </option> 
%		            foreach my $jack ( @alljacks ) {
%                             next if ($jack->id == $if->jack->id);  
		              <option value="<% $jack->id %>"><% $jack->jackid %></option>
%			    }
		           <option value="0">[null]</option> 
		         </select>
%		      }else{  #too many instances.  Offer a keyword search
%		         my $srchf = '_' . $if->id . 'jack_srch';  #name of the form input tag
		         <input type="text" name="<% $srchf %>" value="Keywords">
		         &nbsp;<input type="button" name="" value="List" 
		         onClick="sendquery(<% '_Interface__' . $if->id . '__jack' %>, <% $srchf . '.value' %>, 'HorizontalCable')" >
		         <br><select name="<% '_Interface__' . $if->id . '__jack' %>">
		            <option value="<% $if->jack->id %>" selected><% $if->jack->jackid %></option>
			    <option value="0">[null]</option>
		         </select>
%		      }
%                   }else{  # No jacks assigned yet.  Offer a keyword search
%		       my $srchf = '_' . $if->id . 'jack_srch';  #name of the form input tag
		       <input type="text" name="<% $srchf %>" value="Keywords">
		       &nbsp;<input type="button" name="" value="List" 
		       onClick="sendquery(<% '_Interface__' . $if->id . '__jack' %>, <% $srchf . '.value' %>, 'HorizontalCable')" >
		       <br><select name="<% '_Interface__' . $if->id . '__jack' %>">
			  <option value="0">[null]</option>
		       </select>
%                   } 

%	         }elsif(defined($if->jack)){
		    <a href="view.html?table=HorizontalCable&id=<% $if->jack->id %>"><% $if->jack->jackid %></a>
%		 }
	   </td>
	   <td align="left"> 
%               $ui->textField(object=>$if, column=>"description", edit=>$editints);
	   </td>
	   <td align="left">
%	   my @parents = $if->parents;
%	   if (scalar(@parents)){
%	     foreach my $par (@parents){	   
%		 my $lbl = $ui->getobjlabel($par->parent, ", ");
%	      	 if ($editints){	 
%		 # Check for amount of objects in table before retrieving all
%		    my $count = Interface->count_all;
%		    if ( $count <= $maxselect ){			      
%		       my @allifs = Interface->retrieve_all;
%		       @allifs = sort { $a->number <=> $b->number } @allifs; 
   		       <select name="<% "InterfaceDep__" . $par->id ."__parent" %>">
		         <option value="$par->parent->id" selected><% $lbl %> </option> 
%		          foreach my $if ( @allifs ) {
		            <option value="<% $if->id %>"><% $ui->getobjlabel($if, ", ") %></option>
%			  }
		         <option></option> 
		       </select>
%		    }else{  #too many instances.  Offer a keyword search
%		       my $srchf = '_' . $if->id . 'parent_srch';  #name of the form input tag
		       <input type="text" name="<% $srchf %>" value="Keywords">
		       &nbsp;<input type="button" name="" value="List" 
		       onClick="sendquery(<% "_InterfaceDep__" . $par->id . "__parent" %>, <% $srchf . '.value' %>, 'Interface')" >
		       <br><select name="<% "_InterfaceDep__" . $par->id . "__parent" %>">
		          <option value="<% $par->parent->id %>" selected><% $lbl %></option>
			  <option value="0">[null]</option>
		       </select>
		       <input type="checkbox" name=<% "InterfaceDep__" . $par->id . "__delete" %> >[del]
%		    }
%	         }else{
		    <% $lbl %><br>
%		 }
%	     } #foreach my $par
%	   }else{ # No parents exist
%	      if ($editints){	 
%	        my $srchf = '_' . $if->id . 'parent_srch';  #name of the form input tag
		<input type="text" name="<% $srchf %>" value="Keywords">
	        &nbsp;<input type="button" name="" value="List" 
	        onClick="sendquery(<% "_InterfaceDep__" . $if->id ."__new" %>, <% $srchf . '.value' %>, 'Interface')" >
	        <br><select name="<% "_InterfaceDep__" . $if->id ."__new" %>">
	 	  <option value="0">[null]</option>
	        </select>	      
%	     }
%	   }

	   </td>
	   <td align="left"> 
%                $ui->radioGroupBoolean(object=>$if, column=>"monitored", edit=>$editints);
	   </td>
	  </tr>
%       } #foreach
     <tr>
%    if ($editints){	 
            <td colspan="8" width="100%" align="right">
	       <input name="submit" value="save" type="submit">
	    </td>
	    </form>
%    }else{
	    <form action="device-ws.html" method="POST">
	      <td colspan="8" width="100%" align="left">
	        Manually 
	        <input type="hidden" name="id" value="<% $id %>">
	        <input type="submit" name="intadd" value="Add">
	        <input type="text" name="intaddnum" value="0" size="3"> interfaces
              </td>
	    </form>
%    }
     </tr>
     </table>
    </td>
       </tr>
  </table>
<!-- End Interface Table -->

 </td></tr>
</table>
<!-- End Margins Table -->
%} # if !defined search


<%args>
$id       => undef
$search   => undef
$edit     => undef
$editgen  => undef
$editloc  => undef
$editmgmt => undef
$editips  => undef
$editints => undef
$ipsort   => undef
$s2name   => "Management"
$user     => $ENV{REMOTE_USER}
</%args>

<%init>
my $DEBUG = 0;
my $ui = Netdot::UI->new();
my $dns = Netdot::DNSManager->new();
my $ipm = Netdot::IPManager->new();
my %cssitem = ( 0 => "formtablec1", 1 => "formtablec2" );
my $maxselect = 100;
my $o = undef;
my $ci = 0;
my %arg;
my $name;

if ($id){
   $o = Device->retrieve($id);
   $name = $o->name->name;
}else{
   $name = "Search"
}
</%init>

<%doc>
-- Device Worksheet --
Interface for viewing/updating a particular Device 
and all its relevant info in one page

</%doc>
