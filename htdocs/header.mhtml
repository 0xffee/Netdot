<%doc>

Common header for all pages

</%doc>
<%args>
$title
$section
$user
$showheader
$onload
$meta_refresh => 0
</%args>
%
<%init>
my $DEBUG      = 0;
print '%ARGS is  <pre>', Dumper(%ARGS), '</pre><br>' if $DEBUG;
my $servername = $ui->config->get('NETDOTNAME');

my $hideheader;
if( !$showheader ) {
    $hideheader = 'style="display:none"';
}

if( $onload ) {
    $onload = ' onload="'.$onload.'"';
}
</%init>
%
%
<html>
<head>
  <!-- Use the path as set in the Apache conf for the netdot root so
       the user can change the location with out editing any code.
       The path needs to be absolute here since the user could pass
       any url and get redirected to login (although right now the
       only files not at the root are the images, and possibly a
       request for /netdot which I think gets translated to /netdot/
       before AuthCookie takes over anyway).
  -->
  <link rel="StyleSheet" href="<% $r->dir_config('NetdotPath') %>css/style.css" type="text/css" />
  <link rel="StyleSheet" href="<% $r->dir_config('NetdotPath') %>css/datechooser.css" type="text/css" />
  <title>Netdot @ <% $servername %>: <% $title %></title>
%
% if ( $meta_refresh ){
    <meta http-equiv="refresh" content="<% $meta_refresh %>">
% }
</head>
% my $js_prefix = $r->dir_config('NetdotPath') . "java_script";
% for my $script qw( dynamic_list select jsrsClient ) {
<script language="JavaScript" src="<% $js_prefix %>/<% $script %>.js"></script>
% }
<script language="JavaScript">
<!--
    function toggleLayer(whichLayer) {
        if (document.getElementById) {
            // this is the way the standards work
            var style2 = document.getElementById(whichLayer).style;
            style2.display = style2.display=="none"?"block":"none";
        } else if (document.all) {
            // this is the way old msie versions work
            var style2 = document.all[whichLayer].style;
            style2.display = style2.display=="none"?"block":"none";
        } else if (document.layers) {
            // this is the way nn4 works
            var style2 = document.layers[whichLayer].style;
            style2.display = style2.display=="none"?"block":"none";
        }
        return style2.display;
    }
    function toggleTasks() {
        var display;
        display = toggleLayer('tasks');
        document.getElementById('tasks_link').innerHTML = (display=='none'?'[show]':'[hide]');
        jsrsExecute( "user_pref.html", emptyfunction, "set_value", Array('SHOW_TASKS', (display=='none'?'hide':'show')) );
    }
    function emptyfunction() {
        // do nothing
%       # this function is called by the jsrs code after toggleTasks is called.
%       # if this function doesn't exist, we get "context pool full" errors if
%       # toggleTasks is called too many times in a row.
    }
-->
</script>

<body<% $onload %>>
<div id="header" <% $hideheader %>>
    <a href="../index.html" ><img border="0" class="headleft" SRC="<% $r->dir_config('NetdotPath') %>img/title.png"
        alt="Netdot: Network Documentation Tool" /></a>
    <span class="headright">
      <form action="search.html" method="post">
        <label for="q"><b>search</b>:</label>
        <input type="text" name="q" size="13" value="">
      </form>
        <br />
%
%       if( $user ) {
            <B>user</B>: <% $user->getUsername() %> &nbsp;
%       }
%
        [<a href="<% $r->dir_config('NetdotPath') %>logout.html">logout</a>]
    </span>
    <hr />
    <span class="headleft"><% $servername %></span>
    <span class="headright"><% scalar localtime %></span>
</div>
