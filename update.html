<%perl>
unless ( $ARGS{table} && $ARGS{id} ){
   print "<strong>Missing required parameters 'table' and/or 'id'</strong>";
   exit;
}
</%perl>
%if ( $ARGS{cancel} eq 'Cancel' ){
    <& expview.html, table => $ARGS{table}, id => $ARGS{id} &>
%   exit;
%}
<%perl>
$table = $ARGS{table};
my $obj = $table->retrieve($ARGS{id});
foreach my $j (keys %ARGS){
	next if ($j eq 'submit' || $j eq 'table' || $j eq 'id');
	$arg{$j} = $ARGS{$j};	
}

# Check that we have at least one column parameter
unless (scalar keys(%arg)){
   print "<strong>Missing update parameters</strong>";
   exit;
}
foreach my $col (keys %arg){
   if ($arg{$col} ne $obj->$col){
      $obj->set($col, $arg{$col});
      $upd{$col} = $arg{$col};
   }
}
$obj->update;
</%perl>

<& expview.html, table => $ARGS{table}, id => $ARGS{id} &>

<%init>
use lib "/home/netdot/public_html/lib";
use Netdot::DBI;
use Data::Dumper;
my( %arg, %linksto, %linksfrom, $table, $mi, %order, %upd);
           
</%init>
