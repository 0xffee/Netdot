<%doc>

Performs a general search in the database, looking into every field of every table.

</%doc>


<%args>
$q

</%args>

<%init>

my %linksto;
my $results = $ui->search_all_netdot($q);

</%init>


<!-- begin search -->
<form action="search.html" method="POST">

<p>Netdot Search

<form>
  <input type="text" name="q" size="25" value="<% $q %>">
  <input name="submit" value="Submit" type="submit">
</form>

%   if( scalar( keys %$results ) < 1 || ! %$results ) {
      No matching records were found.
%   } else {
      <blockquote>
      <table cellpadding="4" cellspacing="0" border="0" class="formtablebg">
%     foreach my $tbl ( sort { $a cmp $b } keys %$results ) {
%       my @objs;
%       map { push @objs, $results->{$tbl}->{$_} } keys %{ $results->{$tbl} };
	<tr class="formtabletitle">
        <td colspan="2" class="rowtitle0"><strong><% $tbl %></strong></td>
        </tr>
        <tr><td>
        <& sortresults.mhtml, table => $tbl, object => \@objs, view => "column" &>
        </td></tr>
%     } # end foreach tbl
      </table>
      </blockquote>
%   } # end else

<br>
<!-- end search -->
