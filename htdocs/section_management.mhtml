
<%doc>

 Network Management Functions

</%doc>

<%init>
my $currentUser = SiteControl::AccessController::getCurrentUser($r);
my %caller_args = $m->caller_args(-1);

if (exists($caller_args{page}))
{
    $currentUser->setAttribute($r, "MANAGEMENT_PAGE", $caller_args{page});
}

my $page = $currentUser->getAttribute("MANAGEMENT_PAGE");

</%init>


<tr class="rowtitle0" align="center">
    <td align="center"><h3>Management</h3></td>
</tr>

<tr class="rowtitle0" align="left">
    <td align="left">
%       if ($page eq "DEVICE" || $page eq "") {
            [Devices] | 
%       } else {
            <a href="index.html?s2name=Management&page=DEVICE">[Devices]</a> |     
%       }
%       if ($page eq "ADDRESS") {
           [Address Space] 
%       } else {
           <a href="index.html?s2name=Management&page=ADDRESS">[Address Space]</a>
%       }
        <br><hr>
    </td>
</tr>

% if ($page eq "DEVICE" || $page eq "") {

<tr class="rowtitle0" >
    <td>
    <table border="0" width="100%" class="tablebackground">
       <tr>
	  <td valign="top" width="50%">
	    <table border="0"width="100%" class="formtablebg">
	      <tr class="formtabletitle"><th colspan="2">Find Devices</th></tr>
	      <tr>
	        <td>Name:</td>
		<td>
		   <form action="device.html" method="POST">
		     <input type="text" name="search" size="20" value=""> 
		     <input name="submit" value="search" type="submit">
		  </form>
		</td>
	      </tr>
	      <tr>
	       <td>IP:</td>
	       <td>
                 <form action="ip-ws.html" method="POST">
		   <input type="text" name="search" size="20" value=""> 
		   <input name="submit" value="search" type="submit">
		   <input type="hidden" name="_action" value="SEARCH">
		 </form>
              </td>
	     </tr>
	     <tr>
	       <td>MAC:</td>
	       <td>
		 <form action="mac-ws.html" method="POST">
	           <input type="text" name="search" size="20" value=""> 
		   <input name="submit" value="search" type="submit">
	       </form>
	       </td>
	    </tr>
	  </table>
         <td valign="top" width="50%">
	   <table border="0"width="100%" class="formtablebg">
	   <tr class="formtabletitle"><th colspan="2">Discover/Update a Device</th></tr>
	   <form action="updatedevice.html" method="POST">
	    <tr>
	      <td>Name:
	        <input type="text" name="host" size="20" value="">
	        Community: <input type="text" name="comstr" size="10" value="<% $ui->{config}->{'DEFAULT_SNMPCOMMUNITY'} %>">
	      	<input type="hidden" name="action" value="discover">
		<input type="submit" name="submit" value="discover">
	      </td>
	   </tr>
	   </form>
	  </table>
	   <table border="0"width="100%" class="formtablebg">
	   <tr class="formtabletitle">
	     <th colspan="2">
	       Manually Add a Device
	     </th>
	   </tr>
	   <form action="device.html" method="POST">
	    <tr>
	      <td>Name:
	        <input type="text" name="newhost" size="20" value="">
	        IP:
	        <input type="text" name="newip" size="15" value="">
	      	<input type="hidden" name="deviceadd" value="add">
		<input type="submit" name="submit" value="add">
	      </td>
	    </tr>
	   </form>
	  </table>
	</td>
      </tr>
    </table>
    </td>
</tr>

% } elsif ($page eq "ADDRESS") {

<tr class="rowtitle0" >
    <td>
    <table border="0" cellpadding="4" cellspacing="0" width="100%" class="formtablebg">
       <tr>
          <td colspan="2" align="center">
              <form action="ip-ws.html" method="POST">
              <select name="id">
	          <option value="0" SELECTED> -- Select Root -- </option>
%	      my @rbs = $ipm->getrootblocks;
%             if (scalar @rbs){
%               foreach my $r ( @rbs ){
                  <option value="<% $r->id %>"><% $r->address . "/" . $r->prefix %></option>
%               }
%             }else{
                <option value="0"> - </option>                 
%             }
              </select>
              <input name="submit" value="Go" type="submit">
              <input type="hidden" name="_action" value="VIEW">
              </form>
          </td>
      </tr>
          <td>
              <form action="ip-ws.html" method="POST">
              Find Block (IP[/prefix])<input type="text" name="search" size="20" value=""> 
              <input name="submit" value="Find" type="submit">
              <input type="hidden" name="_action" value="SEARCH">
              </form>
          </td>
          <td>
              <form action="ip-ws.html" method="POST">
              Allocate New Block (IP/prefix)<input type="text" name="allocate" size="20" value=""> 
              <input name="submit" value="Allocate" type="submit">
              <input type="hidden" name="_action" value="ALLOCATE">
              </form>
          </td>
       <tr>
      </tr>
    </table>
    </td>
</tr>

%}
